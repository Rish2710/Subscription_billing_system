{% extends 'billing/emails/base_email.html' %}

{% block title %}Subscription Expiring Soon{% endblock %}

{% block content %}
<div style="background-color: #fff3cd; border: 1px solid #ffeaa7; border-radius: 8px; padding: 20px; margin: 20px 0;">
    <h2 style="color: #856404; margin-top: 0;">ðŸ”” Your Subscription is Expiring Soon!</h2>
    <p style="color: #856404; font-size: 16px;">Your subscription will expire in <strong>{{ days_remaining }} day{{ days_remaining|pluralize }}</strong>.</p>
</div>

<h3 style="color: #333;">Hello {{ user.first_name|default:user.username }},</h3>

<p>This is a friendly reminder that your <strong>{{ plan.name }}</strong> subscription is about to expire.</p>

<div style="background-color: #f8f9fa; border-radius: 8px; padding: 20px; margin: 20px 0;">
    <h4 style="margin-top: 0; color: #495057;">Subscription Details:</h4>
    <table style="width: 100%; border-collapse: collapse;">
        <tr style="border-bottom: 1px solid #dee2e6;">
            <td style="padding: 8px 0; font-weight: bold;">Plan:</td>
            <td style="padding: 8px 0;">{{ plan.name }}</td>
        </tr>
        <tr style="border-bottom: 1px solid #dee2e6;">
            <td style="padding: 8px 0; font-weight: bold;">Price:</td>
            <td style="padding: 8px 0;">${{ plan.price }}/month</td>
        </tr>
        <tr style="border-bottom: 1px solid #dee2e6;">
            <td style="padding: 8px 0; font-weight: bold;">Start Date:</td>
            <td style="padding: 8px 0;">{{ subscription.start_date }}</td>
        </tr>
        <tr style="border-bottom: 1px solid #dee2e6;">
            <td style="padding: 8px 0; font-weight: bold;">Expiration Date:</td>
            <td style="padding: 8px 0; color: #dc3545; font-weight: bold;">{{ subscription.end_date }}</td>
        </tr>
        <tr>
            <td style="padding: 8px 0; font-weight: bold;">Status:</td>
            <td style="padding: 8px 0;">
                <span style="background-color: #d4edda; color: #155724; padding: 4px 8px; border-radius: 4px; font-size: 14px;">
                    {{ subscription.status|title }}
                </span>
            </td>
        </tr>
    </table>
</div>

<p style="font-size: 16px;">To continue enjoying our services without interruption, please renew your subscription.</p>

<div style="text-align: center; margin: 30px 0;">
    <a href="http://localhost:8000/billing/plans/" 
       style="background-color: #28a745; color: white; padding: 15px 30px; text-decoration: none; border-radius: 5px; font-weight: bold; display: inline-block;">
        ðŸ’³ Renew Subscription
    </a>
</div>

<div style="background-color: #d1ecf1; border: 1px solid #bee5eb; border-radius: 8px; padding: 15px; margin: 20px 0;">
    <h4 style="color: #0c5460; margin-top: 0;">ðŸ“ž Need Help?</h4>
    <p style="color: #0c5460; margin-bottom: 0;">
        If you have any questions about your subscription or need assistance with renewal, 
        please don't hesitate to contact our support team.
    </p>
</div>

<p>Thank you for being a valued customer!</p>

<p style="color: #6c757d; font-size: 14px; margin-top: 30px;">
    <em>This is an automated reminder. Your subscription will expire on {{ subscription.end_date }}.</em>
</p>
{% endblock %} 